/* Amarillacss The Author (https://gitea.com/amarillacssjs)
 * MIT Licence (https://x.com/amarillacss)
 * Version: v1
 * Â© Copyright 2024 - 2025
 */
(function() {
    function es() {
        const amarillacjs = {
            navTop: null,
            fixedNav: function () {
                const nav = document.querySelector('.to-top');
                if (nav) {
                    if (!amarillacjs.navTop) {
                        amarillacjs.navTop = nav.offsetTop;
                    }
                    if (window.scrollY >= amarillacjs.navTop) {
                        nav.classList.add('x-fixed');
                    } else {
                        nav.classList.remove('x-fixed');
                    }
                }
            },
            startClock: function () {
                const today = new Date();
                let h = today.getHours();
                let m = today.getMinutes();
                let s = today.getSeconds();
                m = amarillacjs.checkTime(m);
                s = amarillacjs.checkTime(s);
                let clockly = h + ":" + m + ":" + s;
                const clockElement = document.querySelector('.clock');
                if (clockElement) {
                    if (clockly > "18:30:00" && clockly < "05:00:00") {
                        clockElement.innerHTML = "ðŸŒŒ";
                    } else {
                        clockElement.innerHTML = "ðŸŒ¤";
                    }
                    setTimeout(amarillacjs.startClock, 200);
                }
            },
            checkTime: function (i) {
                if (i < 10) {
                    i = "0" + i;
                }
                return i;
            },
            toggleMenuTwo: function() {
                const mobileMenu = document.querySelector(".x-menu-down");

                const navList = document.querySelector(".sm-menu-toggle");
                if (mobileMenu && navList) {
                    mobileMenu.addEventListener("click", () => {
                        navList.classList.toggle("active");
                    });
                }
            },
            toggleMenu: function () {
                const buttonPlay = document.querySelector('.x-menu');
                const menus = document.querySelector('.x-sidebar');
                const toChange = document.querySelector('.x-menu');
                if (buttonPlay && menus && toChange) {
                    buttonPlay.addEventListener('click', () => {
                        const active = menus.classList.toggle('active');
                        if (active) {
                            toChange.innerHTML = "<i class='sm:font:size:small fa fa-x'></i>";
                        } else {
                            toChange.innerHTML = "&#9776";
                        }
                    });
                }
            },
            cloneTitle: function () {
                const branded = document.querySelector('.title');

                if (branded) {
                    const cop = branded.cloneNode(true);
                    document.querySelector('.co-title').appendChild(cop);
                }
            },

            setDarkMode: function (isDark) {
                const darkBtn = document.getElementById('button:dark');
                const lightBtn = document.getElementById('button:light');

                if (isDark) {
                    lightBtn.style.display = "block";
                    darkBtn.style.display = "none";
                    localStorage.setItem('preferredTheme', 'dark');
                } else {
                    lightBtn.style.display = "none";
                    darkBtn.style.display = "block";
                    localStorage.removeItem('preferredTheme');
                }

                document.body.classList.toggle("dark:mode");
            },
            checkLocalStorage: function () {
                if (localStorage.getItem('preferredTheme') === 'dark') {
                    amarillacjs.setDarkMode(true);
                }
            },
            checkStyleCSS: function () {
                const cssAlias = "amarillacss-"+Version+".min.css";
                const links = document.querySelectorAll('link[rel="stylesheet"]');
                links.forEach(link => {
                    const href = link.getAttribute('href');
                    if (!href.includes(cssAlias)) {
                        link.setAttribute('href', cssAlias);
                    }
                });
            },
            versi: function (version) {
                let vrs = document.getElementById('versi');
                if (vrs) {
                    vrs.innerHTML = version;
                }
            },

            rainbowhightlights: function() {
                const tagCodes = document.querySelectorAll('code');
                var dataLang = "data-language";
                var toc = ["html"];
                fm = amarillacjs.forItm(toc);
                if (tagCodes) {
                    tagCodes.forEach(codeRain => {
                        codeRain.setAttribute(dataLang, toc);
                    });
                }
            },

            forItm: function(arr) {
                let sum = 0;

                for (let i = 0; i < arr.length; i++) {
                    sum += arr[i];
                }

                return sum;
            },
            init: function () {
                document.addEventListener('DOMContentLoaded',
                    function () {
                        amarillacjs.startClock();
                        amarillacjs.toggleMenu();
                        amarillacjs.toggleMenuTwo();
                        amarillacjs.cloneTitle();
                        amarillacjs.checkStyleCSS();
                        amarillacjs.versi(Version);
                        amarillacjs.rainbowhightlights();
                        amarillacjs.checkLocalStorage();
                    });
                window.addEventListener('scroll', function() {
                    amarillacjs.fixedNav();
                });

            }
        };
        amarillacjs.init();
    }
    function teh() {
        const fontawesome = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css";
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = fontawesome;
        document.head.appendChild(link);
        const script = document.createElement('script');
        script.src = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js";
        script.integrity = "sha512-6sSYJqDreZRZGkJ3b+YfdhB3MzmuP9R7X1QZ6g5aIXhRvR1Y/N/P47jmnkENm7YL3oqsmI6AK+V6AD99uWDnIw==";
        script.crossOrigin = "anonymous";
        script.referrerPolicy = "no-referrer";
        document.head.appendChild(script);
    }
    function craig() {
        const bubbles = document.createElement('script');
        bubbles.src = "https://cdn.jsdelivr.net/gh/aliflamro/craig-campbell/frmwk/bubbles.min.js";
        document.head.appendChild(bubbles);

        const generic = document.createElement('script');
        generic.src = "https://cdn.jsdelivr.net/gh/aliflamro/craig-campbell/frmwk/generic.min.js";
        document.head.appendChild(generic);
    }
    
    Object.defineProperty(window,
        'es',
        {
            value: es,
            writable: false,
            configurable: false
        });
    const handler = {
        set: function(target, property, value) {
            if (property === 'es') {
                window.location.href = "#";
            }
            return true;
        }
    };
    const proxy = new Proxy(window, handler);
    window = proxy;
    teh();
    craig();
    es();
    // Version Framework
    const Version = "v1";
    const VersionIssueJS = "v1.0.27";
    console.log(`Version css and javascript: ${Version} Â© 2024 - 2025 Amarillacss (https://gitea.com/amarillacssjs/) The Authors Scripts on to Gitea`);

})();